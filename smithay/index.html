<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Smithay: the Wayland compositor smithy"><meta name="keywords" content="rust, rustlang, rust-lang, smithay"><title>smithay - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href='../smithay/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate smithay</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.3.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all smithay's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li></ul></div><div id="sidebar-vars" data-name="smithay" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container rust-logo" href='../smithay/index.html'><img src='../rust-logo.png' alt='logo'></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">smithay</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/smithay/lib.rs.html#1-84" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="smithay-the-wayland-compositor-smithy" class="section-header"><a href="#smithay-the-wayland-compositor-smithy">Smithay: the Wayland compositor smithy</a></h2>
<p>This crate is a general framework for building wayland compositors. It currently focuses on low-level,
helpers and abstractions, handling most of the system-level and wayland protocol interactions.
The window management and drawing logic is however at the time not provided (but helpers for this
are planned for future version).</p>
<h3 id="structure-of-the-crate" class="section-header"><a href="#structure-of-the-crate">Structure of the crate</a></h3>
<p>The provided helpers are split into two main modules. <a href="backend/index.html" title="backend"><code>backend</code></a> contains helpers for interacting with
the operating system, such as session management, interactions with the graphic stack and input
processing. On the other hand, <a href="wayland/index.html" title="wayland"><code>wayland</code></a> contains helpers for interacting with wayland clients
according to the wayland protocol. In addition, the <a href="xwayland/index.html" title="xwayland"><code>xwayland</code></a> module contains helpers for managing
an XWayland instance if you want to support it. See the documentation of these respective modules for
information about their usage.</p>
<h3 id="general-principles-for-using-smithay" class="section-header"><a href="#general-principles-for-using-smithay">General principles for using Smithay</a></h3><h4 id="the-event-loop-and-state-handling" class="section-header"><a href="#the-event-loop-and-state-handling">The event loop and state handling</a></h4>
<p>Smithay is built around <a href="../calloop/index.html" title="calloop"><code>calloop</code></a>, a callback-oriented event loop, which fits naturally with the
general behavior of a wayland compositor: waiting for events to occur and react to them (be it
client requests, user input, or hardware events such as <code>vblank</code>).</p>
<p>Using a callback-heavy structure however poses the question of state management: a lot of state needs
to be accessed from many different callbacks. To avoid an heavy requirement on shared pointers such
as <code>Rc</code> and <code>Arc</code> and the synchronization they require, <a href="../calloop/index.html" title="calloop"><code>calloop</code></a> allows you to provide a mutable
reference to a value, that will be passed down to most callbacks (possibly under the form of a
<a href="../wayland_commons/filter/struct.DispatchData.html"><code>DispatchData</code></a> for wayland-related callbacks). This structure provides
easy access to a centralized mutable state without synchronization (as the callback invocation is
<em>always</em> sequential), and is the recommended way to of structuring your compositor.</p>
<p>Several objects, in particular on the wayland clients side, can exist as multiple instances where each
instance has its own associated state. For these situations, these objects provide an interface allowing
you to associate an arbitrary value to them, that you can access at any time from the object itself
(rather than having your own container in which you search for the appropriate value when you need it).</p>
<h4 id="logging" class="section-header"><a href="#logging">Logging</a></h4>
<p>Most entry points in the modules can take an optional <a href="../slog/struct.Logger.html"><code>slog::Logger</code></a> as argument
that will be used as a drain for logging. If <code>None</code> is provided, the behavior depends on
whether the <code>slog-stdlog</code> is enabled. If yes, the module will log to the global logger of the
<code>log</code> crate. If not, the logs will discarded. This cargo feature is part of the default set of
features of Smithay.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="backend/index.html" title="smithay::backend mod">backend</a></div><div class="item-right docblock-short"><p>Backend (rendering/input) helpers</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="reexports/index.html" title="smithay::reexports mod">reexports</a></div><div class="item-right docblock-short"><p>Reexports of crates, that are part of the public api, for convenience</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="utils/index.html" title="smithay::utils mod">utils</a></div><div class="item-right docblock-short"><p>Various utilities functions and types</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="wayland/index.html" title="smithay::wayland mod">wayland</a></div><div class="item-right docblock-short"><p>Protocol-related utilities</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="xwayland/index.html" title="smithay::xwayland mod">xwayland</a></div><div class="item-right docblock-short"><p>XWayland utilities</p>
</div></div></div><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.egl_platform.html" title="smithay::egl_platform macro">egl_platform</a></div><div class="item-right docblock-short"><p>Create a <code>EGLPlatform&lt;'a&gt;</code> for the provided platform.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="smithay" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0-nightly (6bda5b331 2021-12-12)" ></div>
</body></html>